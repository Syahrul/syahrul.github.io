"use strict";(self.webpackChunksyahrul=self.webpackChunksyahrul||[]).push([[555],{5555:(J,h,l)=>{l.r(h),l.d(h,{QuranViewerModule:()=>q});var g=l(6895),p=l(3994);function d(i,s,o,n,e,r,a){try{var c=i[r](a),u=c.value}catch(N){return void o(N)}c.done?s(u):Promise.resolve(u).then(n,e)}var y=l(567),t=l(4650),P=l(6858),_=l(7392);let A=(()=>{var i;class s{constructor(){}transform(n){return n.toString().replace(/[0123456789]/g,r=>"\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669"[r])}}return(i=s).\u0275fac=function(n){return new(n||i)},i.\u0275pipe=t.Yjl({name:"arabicNumber",type:i,pure:!0}),s})();const M=["surah"],x=["player"],O=function(i){return{"active-verse":i}},m=function(i){return{"ion-hide":i}};function T(i,s){if(1&i&&(t.TgZ(0,"span",24)(1,"span",25),t._uU(2),t.qZA(),t.TgZ(3,"span",26),t._uU(4),t.qZA()()),2&i){const o=s.$implicit,n=s.index,e=t.oxw(),r=e.index,a=e.$implicit,c=t.oxw();t.Q6J("ngClass",t.VKq(6,O,c.setActiveVerse(r,n))),t.uIk("data-segments",a.audio.segments[n]),t.xp6(1),t.Q6J("ngClass",c.selectedArabicText),t.xp6(1),t.hij("",o," "),t.xp6(1),t.Q6J("ngClass",t.VKq(8,m,"page"===c.quranDisplay)),t.xp6(1),t.Oqu(a.words[n].transliteration.text)}}const w=function(i,s){return{even:i,page:s}};function k(i,s){if(1&i){const o=t.EpF();t.TgZ(0,"div",17)(1,"span"),t.YNc(2,T,5,10,"span",18),t.qZA(),t.TgZ(3,"span",19),t._uU(4),t.ALo(5,"arabicNumber"),t.qZA(),t.TgZ(6,"div",20)(7,"div",21),t._uU(8),t._UZ(9,"span",22),t.qZA(),t.TgZ(10,"span",23),t.NdJ("click",function(){const r=t.CHM(o).index,a=t.oxw();return t.KtG(a.playVerse(r))}),t.TgZ(11,"mat-icon"),t._uU(12,"play_circle"),t.qZA()()()()}if(2&i){const o=s.$implicit,n=s.even,e=t.oxw();t.Q6J("ngClass",t.WLB(9,w,n,"page"===e.quranDisplay)),t.xp6(2),t.Q6J("ngForOf",e.getSplittedVerse(o)),t.xp6(1),t.Q6J("ngClass",e.selectedArabicText),t.xp6(1),t.Oqu(t.lcZ(5,7,o.verse_number)),t.xp6(2),t.Q6J("ngClass",t.VKq(12,m,"page"===e.quranDisplay)),t.xp6(2),t.hij(" ",o.verse_number,". "),t.xp6(1),t.Q6J("innerHTML",o.translations[0].text,t.oJD)}}const f=function(i){return{"paging-disable":i}},v=function(i){return{hidden:i}},b=function(i){return{page:i}},Q=[{path:"",component:(()=>{var i;class s{constructor(n,e,r){this.http=n,this.router=e,this._location=r,this.quranDisplay="page",this.currentAudioArray=0,this.selectedArabicText="text_uthmani";const a=this.router.url.split("/");this.chapterID=+a[3],this.pageNumber=+a[5],this.quranType=a[2],this.chapterName=a[4]}ngOnInit(){this.audio=new Audio,"chapter"===this.quranType&&this.getSurah(this.pageNumber),"juz"===this.quranType&&this.getJuzuk(this.pageNumber)}ngOnDestroy(){this.pauseAudio(),this.clearAudio()}goBack(){this.router.navigateByUrl("/quran")}getSurah(n){(0,y.D)({verses:this.http.getQuranChapter(n,this.chapterID,"uthmani","7","131"),chapterInfo:this.http.getQuranChapterInfo(this.chapterID,"en")}).subscribe(r=>{this.pageTitle=r.chapterInfo.chapter.name_simple,this.translatedPageTitle=r.chapterInfo.chapter.translated_name.name,this.verses=r.verses.verses,this.pagination=r.verses.pagination,this.renderPagination()})}getJuzuk(n){this.http.getQuranJuzuk(n,this.chapterID,"uthmani","7","131").subscribe(r=>{this.pageTitle=`Juz ${this.chapterID}`,this.translatedPageTitle=`Total verse - ${r.pagination.total_records}`,this.verses=r.verses,this.pagination=r.pagination,this.renderPagination()})}setActiveVerse(n,e){return this.currentAudioArray>=0&&(n===this.currentAudioArray&&(!!this.verses[this.currentAudioArray].audio.segments[e]&&(this.verses[this.currentAudioArray].audio.segments[e][2]/1e3<=this.currentAudioTime&&this.verses[this.currentAudioArray].audio.segments[e][3]/1e3>=this.currentAudioTime&&this.currentAudioTime>0&&n===this.currentAudioArray)))}getSplittedVerse(n){let e=n[this.selectedArabicText];e=e.trim().split(" ");const r=[1750,1751,1752,1753,1754,1755,1756,1757,1758,1759,57377,8203,1608],a=[];for(const[c,u]of e.entries())r.includes(e[c].trim().charCodeAt(0))&&1===e[c].trim().length?a[a.length-1]=a[a.length-1]+u:a.push(e[c]);return a}playAudio(){const n=this.verses[this.currentAudioArray].audio.url,e=n.includes("mirrors.quranicaudio.com")?`https:${n}`:`https://audio.qurancdn.com/${n}`;this.audio.src||(this.audio.src=e),this.scrollToElement(),this.audio.setAttribute("title",`Quran - ${this.pageTitle}`),this.audio.play(),this.audioIsPlaying=!0,this.highlightVerse(),this.audio.onended=()=>{this.audioEnd()}}highlightVerse(){this.interval=setInterval(()=>{this.currentAudioTime=this.audio.currentTime},100)}playNextVerse(){this.currentAudioArray+1<=this.verses.length-1?(this.currentAudioArray+=1,this.playAudio()):this.currentAudioArray=0}playPrevVerse(){this.currentAudioArray-1>=0?(this.currentAudioArray-=1,this.playAudio()):this.currentAudioArray=0}playVerse(n){this.clearAudio(),this.currentAudioArray=n,this.playAudio()}pauseAudio(){this.audio.pause(),this.audioIsPlaying=!1,clearInterval(this.interval)}clearAudio(){this.audioIsPlaying=!1,this.audio.removeAttribute("src"),this.audio.load(),clearInterval(this.interval),this.currentAudioTime=0}audioEnd(){this.clearAudio(),this.playNextVerse()}seekForward(){this.audioIsPlaying&&(this.audio.currentTime+=1)}seekBackward(){this.audioIsPlaying&&(this.audio.currentTime-=1,this.audio.currentTime<=0&&(this.clearAudio(),this.playPrevVerse()))}scrollToElement(){const n=this.surah.nativeElement.querySelector(`.verse:nth-child(${this.currentAudioArray+1})`);window.scroll({top:n.offsetTop-this.playerDiv.nativeElement.offsetHeight,left:0,behavior:"smooth"})}renderPagination(){this.hasPagination=this.pagination.total_pages>1,this.paginationPages=`${this.pagination.current_page}/${this.pagination.total_pages}`,this.paginationHasPrev=this.pagination.current_page>1,this.paginationHasNext=null!==this.pagination.next_page}loadPage(n){this.clearAudio(),"chapter"===this.quranType&&this.getSurah(n)}loadNextPrevPage(n){let e=!1;"prev"===n&&this.paginationHasPrev&&(this.currentPaginationPage=this.pagination.current_page-1,e=!0),"next"===n&&this.paginationHasNext&&(this.currentPaginationPage=this.pagination.current_page+1,e=!0),e&&(this.clearAudio(),"chapter"===this.quranType&&(this.router.navigate(["quran","chapter",this.chapterID,this.chapterName,this.currentPaginationPage]),this.getSurah(this.currentPaginationPage)),"juz"===this.quranType&&(this.router.navigate(["quran","juz",this.chapterID,this.currentPaginationPage]),this.getJuzuk(this.currentPaginationPage)))}selectPage(){var n=this;return function C(i){return function(){var s=this,o=arguments;return new Promise(function(n,e){var r=i.apply(s,o);function a(u){d(r,n,e,a,c,"next",u)}function c(u){d(r,n,e,a,c,"throw",u)}a(void 0)})}}(function*(){const e=n.paginationPages.split("/"),r=Array.from(Array(+e[e.length-1]),(c,u)=>u+1),a=[];for(const c of r)a.push({text:c,value:c})})()}}return(i=s).\u0275fac=function(n){return new(n||i)(t.Y36(P.O),t.Y36(p.F0),t.Y36(g.Ye))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-quran-viewer"]],viewQuery:function(n,e){if(1&n&&(t.Gf(M,5),t.Gf(x,5)),2&n){let r;t.iGM(r=t.CRH())&&(e.surah=r.first),t.iGM(r=t.CRH())&&(e.playerDiv=r.first)}},decls:34,vars:19,consts:[[1,"container"],[1,"content-container"],[1,"page-title"],[1,"go-back",3,"click"],["id","player"],["player",""],[1,"dummy"],[1,"pagination"],[3,"ngClass","click"],[3,"click"],[1,"play-option"],[1,"audio-player","audio-seek","audio-seek-backward",3,"click"],[1,"no-margin","audio-player",3,"ngClass","click"],[1,"audio-player","audio-seek","audio-seek-forward",3,"click"],[1,"surah",3,"ngClass"],["surah",""],["class","verse",3,"ngClass",4,"ngFor","ngForOf"],[1,"verse",3,"ngClass"],["class","verse-group",3,"ngClass",4,"ngFor","ngForOf"],[1,"verseNumber",3,"ngClass"],[1,"bottom-verse",3,"ngClass"],[1,"translation"],[1,"translation-text",3,"innerHTML"],[1,"no-margin","audio-player",3,"click"],[1,"verse-group",3,"ngClass"],[1,"arabic-verse",3,"ngClass"],[1,"transliteration",3,"ngClass"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2)(3,"span",3),t.NdJ("click",function(){return e.goBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"arrow_back"),t.qZA()(),t._uU(6),t.qZA(),t.TgZ(7,"div",4,5),t._UZ(9,"div",6),t.TgZ(10,"div",7)(11,"ul")(12,"li",8),t.NdJ("click",function(){return e.loadNextPrevPage("prev")}),t._uU(13,"\xab Previous"),t.qZA(),t.TgZ(14,"li",9),t.NdJ("click",function(){return e.selectPage()}),t._uU(15),t.qZA(),t.TgZ(16,"li",8),t.NdJ("click",function(){return e.loadNextPrevPage("next")}),t._uU(17,"Next \xbb"),t.qZA()()(),t.TgZ(18,"div",10)(19,"span",11),t.NdJ("click",function(){return e.seekBackward()}),t.TgZ(20,"mat-icon"),t._uU(21,"fast_rewind"),t.qZA()(),t.TgZ(22,"span",12),t.NdJ("click",function(){return e.playAudio()}),t.TgZ(23,"mat-icon"),t._uU(24,"play_arrow"),t.qZA()(),t.TgZ(25,"span",12),t.NdJ("click",function(){return e.pauseAudio()}),t.TgZ(26,"mat-icon"),t._uU(27,"pause"),t.qZA()(),t.TgZ(28,"span",13),t.NdJ("click",function(){return e.seekForward()}),t.TgZ(29,"mat-icon"),t._uU(30,"fast_forward"),t.qZA()()()(),t.TgZ(31,"div",14,15),t.YNc(33,k,13,14,"div",16),t.qZA()()()),2&n&&(t.xp6(6),t.AsE(" ",e.pageTitle," (",e.translatedPageTitle,") "),t.xp6(6),t.Q6J("ngClass",t.VKq(9,f,!e.paginationHasPrev)),t.xp6(3),t.hij("(",e.paginationPages,")"),t.xp6(1),t.Q6J("ngClass",t.VKq(11,f,!e.paginationHasNext)),t.xp6(6),t.Q6J("ngClass",t.VKq(13,v,e.audioIsPlaying)),t.xp6(3),t.Q6J("ngClass",t.VKq(15,v,!e.audioIsPlaying)),t.xp6(6),t.Q6J("ngClass",t.VKq(17,b,"page"===e.quranDisplay)),t.xp6(2),t.Q6J("ngForOf",e.verses))},dependencies:[g.mk,g.sg,_.Hw,A],styles:[".content-container[_ngcontent-%COMP%]{padding-bottom:0}.page-title[_ngcontent-%COMP%]{margin-bottom:0;position:relative}.page-title[_ngcontent-%COMP%]   .go-back[_ngcontent-%COMP%]{position:absolute;left:10px;cursor:pointer}#player[_ngcontent-%COMP%]{padding:10px;position:sticky;top:0;background:linear-gradient(50deg,#fe7f7d 0%,#ca2c29 100%);color:#fff;display:flex;justify-content:center;align-items:center;z-index:2}@media (max-width: 575.98px){#player[_ngcontent-%COMP%]{flex-direction:column}}#player[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{margin-right:auto;visibility:hidden;width:100px}#player[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{width:100px;margin-left:auto}@media (max-width: 575.98px){#player[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{margin-top:20px;margin-left:0}}#player[_ngcontent-%COMP%]   .play-option[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;line-height:0px;color:#f4f4f4}#player[_ngcontent-%COMP%]   .play-option[_ngcontent-%COMP%]   .audio-player[_ngcontent-%COMP%]{cursor:pointer}#player[_ngcontent-%COMP%]   .play-option[_ngcontent-%COMP%]   .audio-player[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:30px;width:30px;height:30px}.text_uthmani[_ngcontent-%COMP%], .text_uthmani_simple[_ngcontent-%COMP%], .text_uthmani_tajweed[_ngcontent-%COMP%]{font-size:25px}.surah[_ngcontent-%COMP%]{text-align:right;direction:rtl}.surah[_ngcontent-%COMP%]   .verseNumber[_ngcontent-%COMP%]{margin-left:5px;font-family:UthmanicHafs}.surah[_ngcontent-%COMP%]   .verse[_ngcontent-%COMP%]{padding:20px;background-color:#fff;transition:all .5s ease}.surah[_ngcontent-%COMP%]   .verse[_ngcontent-%COMP%]:last-child{margin-bottom:0}.surah[_ngcontent-%COMP%]   .verse.even[_ngcontent-%COMP%]{background-color:#f4f4f4}.surah[_ngcontent-%COMP%]   .verse[_ngcontent-%COMP%]   .verse-group[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin:0 5px 15px}.surah[_ngcontent-%COMP%]   .verse[_ngcontent-%COMP%]   .verse-group.active-verse[_ngcontent-%COMP%]{color:red;transition:none}.surah[_ngcontent-%COMP%]   .verse[_ngcontent-%COMP%]   .verse-group.has-transliteration[_ngcontent-%COMP%]{margin:0 5px 20px}.surah[_ngcontent-%COMP%]   .verse[_ngcontent-%COMP%]   .verse-group[_ngcontent-%COMP%]   .transliteration[_ngcontent-%COMP%]{display:block;font-size:14px;text-align:center;margin:10px 0 0}.surah[_ngcontent-%COMP%]   .verseNumber[_ngcontent-%COMP%]{margin-right:5px;display:inline-block;color:brown}.surah[_ngcontent-%COMP%]   .bottom-verse[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between;align-items:center;direction:ltr}.surah[_ngcontent-%COMP%]   .translation[_ngcontent-%COMP%]{text-align:left;direction:ltr;width:90%}.surah[_ngcontent-%COMP%]   .tajweed-transliteration[_ngcontent-%COMP%]{direction:ltr;text-align:left}.surah[_ngcontent-%COMP%]   .audio-player[_ngcontent-%COMP%]{cursor:pointer}.pagination[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}.pagination[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin:0 10px;cursor:pointer}.pagination[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .paging-disable[_ngcontent-%COMP%]{color:#a9a9a9;cursor:default}"]}),s})()}];let V=(()=>{var i;class s{}return(i=s).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.Bz.forChild(Q),p.Bz]}),s})();var Z=l(5110);let q=(()=>{var i;class s{}return(i=s).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.ez,V,Z.Z,_.Ps]}),s})()}}]);
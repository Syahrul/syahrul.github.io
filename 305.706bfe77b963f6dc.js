"use strict";(self.webpackChunksyahrul=self.webpackChunksyahrul||[]).push([[305],{4305:(T,p,h)=>{h.r(p),h.d(p,{SpriteModule:()=>B});var u=h(9808),g=h(2268);const d=(()=>{class o{constructor(t,e,n,r,s,l){this.x=t,this.y=e,this.w=n,this.h=r,this.context=s,this.myCanvas=l,this.rect={x:this.x,y:this.y,w:this.w,h:this.h}}static setBgColor(t){o._bgData=t}pixelsEquivalent(t,e,n,r){if(0===t[e+3]&&0===n[r+3])return!0;for(var s=4;s--;)if(t[e+s]!==n[r+s])return!1;return!0}allArrayOrTrue(t,e){for(var n=t.length;n--;)if(!t[n]&&!e[n])return!1;return!0}allArrayFalse(t){for(var e=t.length;e--;)if(t[e])return!1;return!0}trimBg(){var t;if(this.rect=this._restrictRectToBoundry(),this.rect.w&&this.rect.h)do{t=this._edgesAreBg(),this.rect=this._contractRect(t)}while(this.rect.h&&this.rect.w&&!this.allArrayFalse(t));return this.rect}_restrictRectToBoundry(){var t=this.rect,e=this.myCanvas.nativeElement,n=Math.min(Math.max(t.x,0),e.width),r=Math.min(Math.max(t.y,0),e.height);return n!==t.x&&(t.w-=n-t.x,t.x=n),r!==t.y&&(t.h-=r-t.y,t.y=r),t.w=Math.min(t.w,e.width-t.x),t.h=Math.min(t.h,e.height-t.y),t}expandToSpriteBoundry(){for(var e=this._edgesAreBg(),n=this._edgesAtBounds();!this.allArrayOrTrue(e,n);)this._expandRect(e,n),e=this._edgesAreBg(),n=this._edgesAtBounds();return this._contractRect(e)}_edgesAreBg(){var t=this.rect,n=this.context,r=null==n?void 0:n.getImageData(t.x,t.y,t.w,1).data,s=null==n?void 0:n.getImageData(t.x+t.w-1,t.y,1,t.h).data,l=null==n?void 0:n.getImageData(t.x,t.y+t.h-1,t.w,1).data,c=null==n?void 0:n.getImageData(t.x,t.y,1,t.h).data;return[this._pixelsContainOnlyBg(r),this._pixelsContainOnlyBg(s),this._pixelsContainOnlyBg(l),this._pixelsContainOnlyBg(c)]}_edgesAtBounds(){var t=this.rect,e=this.myCanvas.nativeElement;return[0===t.y,t.x+t.w===e.width,t.y+t.h===e.height,0===t.x]}_pixelsContainOnlyBg(t){for(var e=o._bgData,n=0,r=null==t?void 0:t.length;n<r;n+=4)if(!this.pixelsEquivalent(e,0,t,n))return!1;return!0}_expandRect(t,e){var n=this.rect;return!t[0]&&!e[0]&&(n.y--,n.h++),!t[1]&&!e[1]&&n.w++,!t[2]&&!e[2]&&n.h++,!t[3]&&!e[3]&&(n.x--,n.w++),n}_contractRect(t){var e=this.rect;return t[0]&&e.h&&(e.y++,e.h--),t[1]&&e.w&&e.w--,t[2]&&e.h&&e.h--,t[3]&&e.w&&(e.x++,e.w--),e}}return o._bgData=[0,0,0,0],o})();var i=h(5e3),f=h(2313);let m=(()=>{class o{constructor(){this.fileDropped=new i.vpe,this.isOver=!1}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.isOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isOver=!1}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isOver=!1;const e=t.dataTransfer.files;e.length&&this.fileDropped.emit(e)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=i.lG2({type:o,selectors:[["","appDragNdrop",""]],hostVars:2,hostBindings:function(t,e){1&t&&i.NdJ("dragover",function(r){return e.onDragOver(r)})("dragleave",function(r){return e.onDragLeave(r)})("drop",function(r){return e.onDrop(r)}),2&t&&i.ekj("dragNdrop",e.isOver)},outputs:{fileDropped:"fileDropped"}}),o})();const v=["canvas"],C=["highlight"],b=["spriteContainer"],_=["spriteContentContainer"],x=["colorInfo"],y=["colorText"],w=["spriteAlert"],k=["toolbarBottom"],M=["file"],P=[{path:"",component:(()=>{class o{constructor(t,e){this.renderer=t,this.titleService=e,this.dragging=!1,this.positionX=0,this.positionY=0,this.startPositionX=0,this.startPositionY=0,this.rect={x:0,y:0,w:0,h:0},this.isBgTransparent=!0,this.isPickingBgColor=!1,this.cssXPos=0,this.cssYPos=0,this.cssWidth=0,this.cssHeight=0,this.imageReader=new Image,this.spriteFilename=""}ngOnInit(){this.titleService.setTitle("Syahrul - CSS Sprite Selector"),this.loadExampleImg()}onMouseMove(t){this.isPickingBgColor||!this.dragging||(this.renderer.addClass(this.toolbarBottom.nativeElement,"disable-select"),this.rect.x=this.startPositionX+Math.min(t.pageX-this.positionX,0),this.rect.y=this.startPositionY+Math.min(t.pageY-this.positionY,0),this.rect.w=Math.abs(t.pageX-this.positionX)||1,this.rect.h=Math.abs(t.pageY-this.positionY)||1,this.displayHighlight(this.rect,!1))}onMouseUp(){if(this.isPickingBgColor)return;this.dragging=!1,this.renderer.removeClass(this.toolbarBottom.nativeElement,"disable-select");const t=new d(this.rect.x,this.rect.y,this.rect.w,this.rect.h,this.context,this.myCanvas);var e=t.trimBg();e.w&&e.h?((e=t.expandToSpriteBoundry()).w===this.myCanvas.nativeElement.width&&e.h===this.myCanvas.nativeElement.height?this.renderer.addClass(this.spriteAlert.nativeElement,"show"):this.renderer.removeClass(this.spriteAlert.nativeElement,"show"),this.displayHighlight({x:e.x,y:e.y,w:e.w,h:e.h},!0),this.updateCSSInfo(e.x,e.y,e.w,e.h)):this.renderer.setAttribute(this.highlight.nativeElement,"style",`\n          top: ${this.rect.y}px;\n          left: ${this.rect.x}px;\n          width: ${this.rect.w}px;\n          height: ${this.rect.h}px;\n          opacity: 1;\n          transition: 0.2s cubic-bezier(0.55, 0.085, 0.68, 0.53);\n          transform: scale(0);\n          transform-origin: center center;\n        `)}spriteSelect(t){this.isPickingBgColor||(this.dragging=!0,this.positionX=t.pageX,this.positionY=t.pageY,this.startPositionX=Math.floor(t.pageX-this.spriteContainer.nativeElement.offsetLeft+this.spriteContainer.nativeElement.scrollLeft),this.startPositionY=Math.floor(t.pageY-this.spriteContainer.nativeElement.offsetTop+this.spriteContainer.nativeElement.scrollTop),this.hideHighlight())}spriteClick(t){var e;if(this.isPickingBgColor){const n=t.offsetX,r=t.offsetY,s=null===(e=this.context)||void 0===e?void 0:e.getImageData(n,r,1,1).data,l="rgba("+s[0]+", "+s[1]+", "+s[2]+", "+String(s[3]/255).slice(0,5)+")";d.setBgColor([s[0],s[1],s[2],s[3]]),0===s[3]?(this.renderer.addClass(this.colorInfo.nativeElement,"transparent"),this.renderer.setAttribute(this.colorInfo.nativeElement,"style","\n          background-color: 'transparent'\n        "),this.renderer.setProperty(this.colorText.nativeElement,"textContent","transparent")):(this.renderer.removeClass(this.colorInfo.nativeElement,"transparent"),this.renderer.setAttribute(this.colorInfo.nativeElement,"style",`\n          background-color: ${l}\n        `),this.renderer.setProperty(this.colorText.nativeElement,"textContent",l))}}displayHighlight(t,e){const{x:n,y:r,w:s,h:l}=t;let c=0;e&&(c=.2),this.renderer.setAttribute(this.highlight.nativeElement,"style",`\n      top: ${r}px;\n      left: ${n}px;\n      width: ${s}px;\n      height: ${l}px;\n      opacity: 1;\n      transition: ${c}s cubic-bezier(0.55, 0.085, 0.68, 0.53);\n    `)}hideHighlight(){this.renderer.setAttribute(this.highlight.nativeElement,"style",`\n          top: ${this.rect.y}px;\n          left: ${this.rect.x}px;\n          width: 0px;\n          height: 0px;\n          opacity: 0;\n    `)}toggleBackgroundColor(){this.isBgTransparent=!this.isBgTransparent,this.renderer.setAttribute(this.contentContainer.nativeElement,"style",`\n      background-color: ${this.isBgTransparent?"":"rgb(0,0,0)"}\n    `),this.isBgTransparent?this.renderer.removeClass(this.highlight.nativeElement,"dark-mode"):this.renderer.addClass(this.highlight.nativeElement,"dark-mode")}pickBackgroundColor(){this.isPickingBgColor=!this.isPickingBgColor}updateCSSInfo(t,e,n,r){this.cssXPos=0==t?0:-t,this.cssYPos=0==e?0:-e,this.cssWidth=n,this.cssHeight=r}openFile(){this.file.nativeElement.click()}uploadFile(t){let e=t;t.target&&(e=t.target.files),e.length&&(this.fileReader=new FileReader,this.fileReader.readAsDataURL(e[0]),this.fileReader.onload=n=>{this.imageReader.src=String(n.target.result),this.imageReader.onload=()=>{var r;this.spriteFilename=e[0].name,this.myCanvas.nativeElement.width=this.imageReader.width,this.myCanvas.nativeElement.height=this.imageReader.height,this.cssWidth=this.imageReader.width,this.cssHeight=this.imageReader.height,this.context=this.myCanvas.nativeElement.getContext("2d"),null===(r=this.context)||void 0===r||r.drawImage(this.imageReader,0,0)}})}loadExampleImg(){const t=new Image;t.src="assets/sprite/sprite-example2.png",t.onload=()=>{var e;this.spriteFilename="sprite-example2.png",this.myCanvas.nativeElement.width=t.width,this.myCanvas.nativeElement.height=t.height,this.cssWidth=t.width,this.cssHeight=t.height,this.context=this.myCanvas.nativeElement.getContext("2d"),null===(e=this.context)||void 0===e||e.drawImage(t,0,0)}}}return o.\u0275fac=function(t){return new(t||o)(i.Y36(i.Qsj),i.Y36(f.Dx))},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-sprite"]],viewQuery:function(t,e){if(1&t&&(i.Gf(v,5),i.Gf(C,5),i.Gf(b,5),i.Gf(_,5),i.Gf(x,5),i.Gf(y,5),i.Gf(w,5),i.Gf(k,5),i.Gf(M,5)),2&t){let n;i.iGM(n=i.CRH())&&(e.myCanvas=n.first),i.iGM(n=i.CRH())&&(e.highlight=n.first),i.iGM(n=i.CRH())&&(e.spriteContainer=n.first),i.iGM(n=i.CRH())&&(e.contentContainer=n.first),i.iGM(n=i.CRH())&&(e.colorInfo=n.first),i.iGM(n=i.CRH())&&(e.colorText=n.first),i.iGM(n=i.CRH())&&(e.spriteAlert=n.first),i.iGM(n=i.CRH())&&(e.toolbarBottom=n.first),i.iGM(n=i.CRH())&&(e.file=n.first)}},hostBindings:function(t,e){1&t&&i.NdJ("mousemove",function(r){return e.onMouseMove(r)},!1,i.evT)("mousedown",function(r){return e.onMouseMove(r)},!1,i.evT)("mouseup",function(r){return e.onMouseUp(r)},!1,i.evT)},decls:57,vars:10,consts:[[1,"container"],[1,"content-container"],[1,"page-title"],[1,"content"],["href","https://github.com/jakearchibald/sprite-cow","target","_blank"],[1,"sprite-toolbar-top"],[1,"button","open-file",3,"click"],[1,"button","pick-background",3,"click"],["title","Toggle Dark Background",1,"button","toggle-background",3,"click"],[1,"toolbar-info"],[1,"color-info","transparent"],["colorInfo",""],[1,"color-text"],["colorText",""],[1,"toolbar-alert"],["spriteAlert",""],[1,"sprite-content-container"],["spriteContentContainer",""],["appDragNdrop","",1,"sprite-container",3,"mousedown","click","fileDropped"],["spriteContainer",""],["width","100","height","100"],["canvas",""],[1,"highlight"],["highlight",""],[1,"drop-indicator"],[1,"sprite-toolbar-bottom"],["toolbarBottom",""],["ng-non-bindable",""],["type","file","accept","image/*",1,"file",2,"top","-5000px","left","0px","opacity","0","position","absolute",3,"change"],["file",""]],template:function(t,e){1&t&&(i.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),i._uU(3,"CSS Sprite Selector"),i.qZA(),i.TgZ(4,"div",3)(5,"h1"),i._uU(6,"Introduction"),i.qZA(),i.TgZ(7,"p"),i._uU(8," This was a fun and challenging project, converting from jQuery code base to Angular. You can get the original code "),i.TgZ(9,"a",4),i._uU(10,"here"),i.qZA(),i._uU(11,". Only the logic part on how to calculate the pixels was ported. "),i.qZA(),i.TgZ(12,"h1"),i._uU(13,"How to use"),i.qZA(),i.TgZ(14,"p"),i._uU(15," To use this app, click Open or drag & drop sprite image from your computer. After that you can click or select an image using your mouse and the CSS background position will be display at the bottom. "),i.qZA(),i.TgZ(16,"div",5)(17,"div",6),i.NdJ("click",function(){return e.openFile()}),i._uU(18,"Open"),i.qZA(),i.TgZ(19,"div",7),i.NdJ("click",function(){return e.pickBackgroundColor()}),i._uU(20," Pick Background "),i.qZA(),i.TgZ(21,"div",8),i.NdJ("click",function(){return e.toggleBackgroundColor()}),i.qZA(),i.TgZ(22,"div",9)(23,"p"),i._uU(24," Background color is set to "),i._UZ(25,"span",10,11),i.TgZ(27,"span",12,13),i._uU(29,"transparent"),i.qZA()()(),i.TgZ(30,"div",14,15)(32,"p"),i._uU(33,"Incorrect background color set?"),i.qZA()()(),i.TgZ(34,"div",16,17)(36,"div",18,19),i.NdJ("mousedown",function(r){return e.spriteSelect(r)})("click",function(r){return e.spriteClick(r)})("fileDropped",function(r){return e.uploadFile(r)}),i._UZ(38,"canvas",20,21)(40,"div",22,23)(42,"div",24),i.qZA()(),i.TgZ(43,"div",25,26)(45,"code",27)(46,"span"),i._uU(47),i.qZA(),i._uU(48),i._UZ(49,"br"),i._uU(50),i._UZ(51,"br"),i._uU(52),i._UZ(53,"br"),i._uU(54,"} "),i.qZA()(),i.TgZ(55,"input",28,29),i.NdJ("change",function(r){return e.uploadFile(r)}),i.qZA()()()()),2&t&&(i.xp6(19),i.ekj("active",e.isPickingBgColor),i.xp6(2),i.ekj("active",!e.isBgTransparent),i.xp6(26),i.hij(".sprite ","{",""),i.xp6(1),i.lnq("\xa0\xa0background: url('",e.spriteFilename,"') no-repeat ",e.cssXPos,"px ",e.cssYPos,"px;"),i.xp6(2),i.hij("\xa0\xa0width: ",e.cssWidth,"px;"),i.xp6(2),i.hij("\xa0\xa0height: ",e.cssHeight,"px;"))},directives:[m],styles:['.sprite-content-container[_ngcontent-%COMP%]{transition:background-color .2s ease-in}.sprite-container[_ngcontent-%COMP%]{position:relative;background:url(/assets/sprite/trans.png) repeat center center;overflow:auto;width:100%;height:50vh;max-height:50vh}.sprite-container.dragNdrop[_ngcontent-%COMP%]   .drop-indicator[_ngcontent-%COMP%]{display:block}.drop-indicator[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(37,207,28,.2);box-shadow:inset 0 0 18px #175a00;display:none;pointer-events:none}.highlight[_ngcontent-%COMP%]{display:block;background-color:#005aff40;border:1px solid rgba(0,114,255,.5);position:absolute;opacity:0;pointer-events:none;width:0px;height:0px}.highlight.dark-mode[_ngcontent-%COMP%]{background-color:#00ff3040;border-color:#00ff3380}.sprite-toolbar-top[_ngcontent-%COMP%]{padding:5px 6px;color:#333;min-height:30px;background:linear-gradient(90deg,#d0d0d0,#a7a7a7);overflow:hidden;border-top-left-radius:10px;border-top-right-radius:10px;-webkit-user-select:none;user-select:none;display:flex;align-items:center;flex-wrap:wrap}.button[_ngcontent-%COMP%]{margin:0 5px 0 0;border:1px solid #888;border-radius:4px;cursor:pointer;padding:4px 10px;position:relative;background-image:linear-gradient(180deg,#fefefe,#b8b8b8);color:#303030}.button[_ngcontent-%COMP%]:before{content:"";display:inline-block;vertical-align:text-top;background:url(/assets/sprite/sprite.png) no-repeat;width:16px;height:16px;margin-right:5px}.button.open-file[_ngcontent-%COMP%]:before{background-position:-23px -1px}.button.pick-background[_ngcontent-%COMP%]:before{background-position:-47px -2px}.button.toggle-background[_ngcontent-%COMP%]{padding:4px 5px}.button.toggle-background[_ngcontent-%COMP%]:before{background-position:-96px -1px;margin-right:0}.button.active[_ngcontent-%COMP%]{background:#707070;box-shadow:inset 0 3px 7px #0009;color:#fff}.toolbar-info[_ngcontent-%COMP%]{vertical-align:middle;margin:10px 0}.toolbar-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;height:15px;line-height:15px}.toolbar-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .color-info[_ngcontent-%COMP%]{width:15px;height:15px;background-color:transparent;display:inline-block;vertical-align:middle}.toolbar-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .color-info.transparent[_ngcontent-%COMP%]{background:url(/assets/sprite/trans.png) repeat center center}.toolbar-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .color-text[_ngcontent-%COMP%]{margin-left:5px}.toolbar-alert[_ngcontent-%COMP%]{margin:10px 10px 10px auto;opacity:0;transition:opacity .5 ease-in}.toolbar-alert.show[_ngcontent-%COMP%]{opacity:1}.toolbar-alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:red;font-weight:700}.sprite-toolbar-bottom[_ngcontent-%COMP%]{padding:25px;margin-bottom:40px;color:#333;min-height:30px;background:linear-gradient(90deg,#d0d0d0,#a7a7a7)}.sprite-toolbar-bottom.disable-select[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.sprite-toolbar-bottom[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:monospace,serif;white-space:pre;color:#303030;font-size:1.2em;white-space:pre-wrap}.sprite-toolbar-bottom[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}']}),o})()}];let O=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[[g.Bz.forChild(P)],g.Bz]}),o})(),B=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[[u.ez,O]]}),o})()}}]);